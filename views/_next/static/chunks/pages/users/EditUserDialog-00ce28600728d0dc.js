(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[909],{6459:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/EditUserDialog",function(){return a(8181)}])},8181:function(e,s,a){"use strict";a.r(s);var t=a(5893),l=a(657),r=a(7645),i=a(5861),n=a(3946),o=a(6580),d=a(6886),c=a(7357),u=a(3321),p=a(1903),x=a(4054),m=a(3841),h=a(8360),f=a(7918),Z=a(8972),j=a(1425),v=a(5675),g=a.n(v),P=a(7294),w=a(6501),b=a(9878),y=a(1566);let C={PaperProps:{style:{maxHeight:224,width:250}}},_=e=>{let{open:s,reports:a,user:v,handleClose:_,initialize:k}=e,N=(0,P.useRef)(null),[S,E]=(0,P.useState)("/images/avatars/1.png"),[z,W]=(0,P.useState)(null),[D,R]=(0,P.useState)(""),[A,M]=(0,P.useState)(""),[F,L]=(0,P.useState)(""),[U,I]=(0,P.useState)(""),[B,G]=(0,P.useState)(""),[O,T]=(0,P.useState)(!1),[X,H]=(0,P.useState)(!1),[J,K]=(0,P.useState)([]);(0,P.useEffect)(()=>{s&&V()},[s]);let V=async()=>{var e;E(v.avatar?"/uploads/users/".concat(v.avatar):"/images/avatars/1.png"),W(null),R(null==v?void 0:v.firstName),M(null==v?void 0:v.lastName),L(null==v?void 0:v.email),I(""),G(""),K((null==v?void 0:null===(e=v.reports)||void 0===e?void 0:e.map(e=>{let{_id:s}=e;return s}))||[])},$=()=>{T(!O)},q=()=>{H(!X)},Q=e=>{let{target:{value:s}}=e;K("string"==typeof s?s.split(","):s)},Y=e=>{let s;return a.map((a,t)=>{a._id==e&&(s=a.name)}),s},ee=e=>{N.current.click()},es=e=>{let s=e.target.files[0],a=new FileReader;W(s),a.onload=()=>E(a.result),a.readAsDataURL(s)},ea=e=>{E("/images/avatars/1.png"),W(null)},et=async()=>{if(""===D.trim())w.ZP.error("Please enter a first name.");else if(""===A.trim())w.ZP.error("Please enter a last name.");else if(""===F.trim())w.ZP.error("Please enter a email.");else if(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(F)){if(""!==U.trim()&&U.length<6)w.ZP.error("Password must be at least 6 characters");else if(""!==U.trim()&&""===B.trim())w.ZP.error("Please enter a confirm password.");else if(""!==U.trim()&&U!==B)w.ZP.error("Passwords must match");else if(0==J.length)w.ZP.error("Please select the report");else{let e=new FormData;z&&e.append("avatar",z),e.append("firstName",D),e.append("lastName",A),e.append("email",F),""!==U.trim()&&e.append("password",U),e.append("reports",J);let{data:s}=await y.Z.put("/admin/users/".concat(v._id),e);s.status?(w.ZP.success(s.msg),_(),k()):w.ZP.error(s.msg)}}else w.ZP.error("Please enter a valid email.")};return(0,t.jsxs)(l.Z,{fullWidth:!0,maxWidth:"xs",open:s,sx:{"& .MuiPaper-root":{maxWidth:500}},children:[(0,t.jsxs)(r.Z,{sx:{mb:3},children:[(0,t.jsx)(i.Z,{component:"span",variant:"h5",children:"Edit User"}),(0,t.jsx)(n.Z,{onClick:_,sx:{position:"absolute",right:12,top:10,color:"#aaa"},children:(0,t.jsx)(b.Z,{icon:"mdi:close"})})]}),(0,t.jsx)(o.Z,{dividers:!0,sx:{overflow:"initial"},children:(0,t.jsxs)(d.ZP,{container:!0,spacing:5,children:[(0,t.jsx)(d.ZP,{item:!0,sm:12,xs:12,children:(0,t.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,t.jsxs)(c.Z,{sx:{width:90,height:100,position:"relative"},children:[(0,t.jsx)(g(),{src:S,layout:"fill",objectFit:"cover",alt:"Avatar",style:{backgroundColor:"#fafafa",borderRadius:2,overflow:"hidden"}}),(0,t.jsx)("input",{hidden:!0,type:"file",ref:N,accept:"image/png, image/jpeg",onChange:es})]}),(0,t.jsxs)(c.Z,{sx:{px:5,py:3},children:[(0,t.jsx)(u.Z,{variant:"contained",sx:{mr:2},onClick:ee,children:"Choose Photo"}),(0,t.jsx)(u.Z,{variant:"contained",color:"error",onClick:ea,children:"Reset Photo"}),(0,t.jsx)(i.Z,{sx:{color:"#EA5455",mt:4},children:"Allowed PNG or JPEG. Max size of 800KB"})]})]})}),(0,t.jsx)(d.ZP,{item:!0,sm:6,xs:12,children:(0,t.jsx)(p.Z,{label:"First Name",size:"small",value:D,onChange:e=>R(e.target.value)})}),(0,t.jsx)(d.ZP,{item:!0,sm:6,xs:12,children:(0,t.jsx)(x.Z,{fullWidth:!0,children:(0,t.jsx)(p.Z,{label:"Last Name",size:"small",value:A,onChange:e=>M(e.target.value)})})}),(0,t.jsx)(d.ZP,{item:!0,sm:12,xs:12,children:(0,t.jsx)(x.Z,{fullWidth:!0,children:(0,t.jsx)(p.Z,{label:"Email",size:"small",value:F,onChange:e=>L(e.target.value)})})}),(0,t.jsx)(d.ZP,{item:!0,sm:6,xs:12,children:(0,t.jsx)(x.Z,{fullWidth:!0,children:(0,t.jsx)(p.Z,{type:O?"text":"password",label:"Password",size:"small",value:U,onChange:e=>I(e.target.value),InputProps:{endAdornment:(0,t.jsx)(n.Z,{"aria-label":"toggle password visibility",onClick:$,onMouseDown:e=>e.preventDefault(),children:(0,t.jsx)(b.Z,{fontSize:"1.25rem",icon:O?"tabler:eye":"tabler:eye-off"})})}})})}),(0,t.jsx)(d.ZP,{item:!0,sm:6,xs:12,children:(0,t.jsx)(x.Z,{fullWidth:!0,children:(0,t.jsx)(p.Z,{type:X?"text":"password",label:"Confirm Password",size:"small",value:B,onChange:e=>G(e.target.value),InputProps:{endAdornment:(0,t.jsx)(n.Z,{"aria-label":"toggle password visibility",onClick:q,onMouseDown:e=>e.preventDefault(),children:(0,t.jsx)(b.Z,{fontSize:"1.25rem",icon:X?"tabler:eye":"tabler:eye-off"})})}})})}),(0,t.jsx)(d.ZP,{item:!0,sm:12,xs:12,children:(0,t.jsxs)(x.Z,{fullWidth:!0,children:[(0,t.jsx)(m.Z,{size:"small",children:"Report List"}),(0,t.jsx)(h.Z,{label:"Report List",size:"small",multiple:!0,value:J,sx:{"& .MuiInputBase-input":{display:"flex",justifyContent:"space-between"}},onChange:Q,renderValue:e=>(0,t.jsx)(c.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,t.jsx)(f.Z,{label:Y(e),color:"primary"},e))}),MenuProps:C,children:a.map((e,s)=>(0,t.jsx)(Z.Z,{value:e._id,sx:{display:"flex",justifyContent:"space-between"},children:(0,t.jsx)(c.Z,{component:"span",children:e.name})},s))})]})})]})}),(0,t.jsxs)(j.Z,{sx:{pt:5},children:[(0,t.jsx)(u.Z,{variant:"contained",onClick:et,children:"Update"}),(0,t.jsx)(u.Z,{variant:"contained",color:"error",onClick:_,children:"Cancel"})]})]})};s.default=_}},function(e){e.O(0,[72,886,792,675,774,888,179],function(){return e(e.s=6459)}),_N_E=e.O()}]);