(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{4561:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/NewUserDialog",function(){return a(5866)}])},5866:function(e,s,a){"use strict";a.r(s);var t=a(5893),l=a(657),r=a(7645),i=a(5861),n=a(3946),o=a(6580),d=a(6886),c=a(7357),p=a(3321),x=a(1903),u=a(4054),h=a(3841),m=a(8360),f=a(7918),Z=a(8972),j=a(1425),P=a(5675),g=a.n(P),w=a(7294),v=a(6501),b=a(9878),y=a(1566);let C={PaperProps:{style:{maxHeight:224,width:250}}},_=e=>{let{open:s,reports:a,handleClose:P,initialize:_}=e,k=(0,w.useRef)(null),[N,S]=(0,w.useState)("/images/avatars/1.png"),[z,E]=(0,w.useState)(null),[W,D]=(0,w.useState)(""),[R,A]=(0,w.useState)(""),[M,F]=(0,w.useState)(""),[L,I]=(0,w.useState)(""),[U,B]=(0,w.useState)(""),[G,O]=(0,w.useState)(!1),[T,X]=(0,w.useState)(!1),[H,J]=(0,w.useState)([]);(0,w.useEffect)(()=>{s&&K()},[s]);let K=async()=>{S("/images/avatars/1.png"),D(""),A(""),F(""),I(""),B(""),J([])},V=()=>{O(!G)},$=()=>{X(!T)},q=e=>{let{target:{value:s}}=e;J("string"==typeof s?s.split(","):s)},Q=e=>{let s;return a.map((a,t)=>{a._id==e&&(s=a.name)}),s},Y=e=>{k.current.click()},ee=e=>{let s=e.target.files[0],a=new FileReader;E(s),a.onload=()=>S(a.result),a.readAsDataURL(s)},es=e=>{S("/images/avatars/1.png"),E(null)},ea=async()=>{if(""===W.trim())v.ZP.error("Please enter a first name.");else if(""===R.trim())v.ZP.error("Please enter a last name.");else if(""===M.trim())v.ZP.error("Please enter a email.");else if(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(M)){if(""===L.trim())v.ZP.error("Please enter a password.");else if(L.length<6)v.ZP.error("Password must be at least 6 characters");else if(""===U.trim())v.ZP.error("Please enter a confirm password.");else if(L!==U)v.ZP.error("Passwords must match");else if(0==H.length)v.ZP.error("Please select the report");else{let e=new FormData;z&&e.append("avatar",z),e.append("firstName",W),e.append("lastName",R),e.append("email",M),e.append("password",L),e.append("reports",H);let{data:s}=await y.Z.post("/admin/users",e);s.status?(v.ZP.success(s.msg),P(),_()):v.ZP.error(s.msg)}}else v.ZP.error("Please enter a valid email.")};return(0,t.jsxs)(l.Z,{fullWidth:!0,maxWidth:"xs",open:s,sx:{"& .MuiPaper-root":{maxWidth:600}},children:[(0,t.jsxs)(r.Z,{sx:{mb:3},children:[(0,t.jsx)(i.Z,{component:"span",variant:"h5",children:"New User"}),(0,t.jsx)(n.Z,{onClick:P,sx:{position:"absolute",right:12,top:10,color:"#aaa"},children:(0,t.jsx)(b.Z,{icon:"mdi:close"})})]}),(0,t.jsx)(o.Z,{dividers:!0,sx:{overflow:"initial"},children:(0,t.jsxs)(d.ZP,{container:!0,spacing:5,children:[(0,t.jsx)(d.ZP,{item:!0,sm:12,xs:12,children:(0,t.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,t.jsxs)(c.Z,{sx:{width:90,height:100,position:"relative"},children:[(0,t.jsx)(g(),{src:N,layout:"fill",objectFit:"cover",alt:"Avatar",style:{backgroundColor:"#fafafa",borderRadius:10,overflow:"hidden"}}),(0,t.jsx)("input",{hidden:!0,type:"file",ref:k,accept:"image/png, image/jpeg",onChange:ee})]}),(0,t.jsxs)(c.Z,{sx:{px:5,py:3},children:[(0,t.jsx)(p.Z,{variant:"contained",sx:{mr:2},onClick:Y,children:"Choose Photo"}),(0,t.jsx)(p.Z,{variant:"contained",color:"error",onClick:es,children:"Reset Photo"}),(0,t.jsx)(i.Z,{sx:{color:"#EA5455",mt:4},children:"Allowed PNG or JPEG. Max size of 800KB"})]})]})}),(0,t.jsx)(d.ZP,{item:!0,sm:6,xs:12,children:(0,t.jsx)(x.Z,{label:"First Name",size:"small",value:W,onChange:e=>D(e.target.value)})}),(0,t.jsx)(d.ZP,{item:!0,sm:6,xs:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,children:(0,t.jsx)(x.Z,{label:"Last Name",size:"small",value:R,onChange:e=>A(e.target.value)})})}),(0,t.jsx)(d.ZP,{item:!0,sm:12,xs:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,children:(0,t.jsx)(x.Z,{label:"Email",size:"small",value:M,onChange:e=>F(e.target.value)})})}),(0,t.jsx)(d.ZP,{item:!0,sm:6,xs:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,children:(0,t.jsx)(x.Z,{type:G?"text":"password",label:"Password",size:"small",value:L,onChange:e=>I(e.target.value),InputProps:{endAdornment:(0,t.jsx)(n.Z,{"aria-label":"toggle password visibility",onClick:V,onMouseDown:e=>e.preventDefault(),children:(0,t.jsx)(b.Z,{fontSize:"1.25rem",icon:G?"tabler:eye":"tabler:eye-off"})})}})})}),(0,t.jsx)(d.ZP,{item:!0,sm:6,xs:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,children:(0,t.jsx)(x.Z,{type:T?"text":"password",label:"Confirm Password",size:"small",value:U,onChange:e=>B(e.target.value),InputProps:{endAdornment:(0,t.jsx)(n.Z,{"aria-label":"toggle password visibility",onClick:$,onMouseDown:e=>e.preventDefault(),children:(0,t.jsx)(b.Z,{fontSize:"1.25rem",icon:T?"tabler:eye":"tabler:eye-off"})})}})})}),(0,t.jsx)(d.ZP,{item:!0,sm:12,xs:12,children:(0,t.jsxs)(u.Z,{fullWidth:!0,children:[(0,t.jsx)(h.Z,{size:"small",children:"Report List"}),(0,t.jsx)(m.Z,{label:"Report List",size:"small",multiple:!0,value:H,sx:{"& .MuiInputBase-input":{display:"flex",justifyContent:"space-between"}},onChange:q,renderValue:e=>(0,t.jsx)(c.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,t.jsx)(f.Z,{label:Q(e),color:"primary"},e))}),MenuProps:C,children:a.map((e,s)=>(0,t.jsx)(Z.Z,{value:e._id,sx:{display:"flex",justifyContent:"space-between"},children:(0,t.jsx)(c.Z,{component:"span",children:e.name})},s))})]})})]})}),(0,t.jsxs)(j.Z,{sx:{pt:5},children:[(0,t.jsx)(p.Z,{variant:"contained",onClick:ea,children:"Create"}),(0,t.jsx)(p.Z,{variant:"contained",color:"error",onClick:P,children:"Cancel"})]})]})};s.default=_}},function(e){e.O(0,[502,72,886,792,675,774,888,179],function(){return e(e.s=4561)}),_N_E=e.O()}]);