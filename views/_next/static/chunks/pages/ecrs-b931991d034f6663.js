(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{6965:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ecrs",function(){return n(3271)}])},3626:function(e,t,n){"use strict";var s=n(5893),i=n(8396),r=n(1732),a=n(7451),l=n(3664),o=n(7632),c=n(1958),d=n(4808),u=n(8456),x=n(8756),h=n(5715);let m=e=>{let{children:t,contentHeightFixed:n}=e,{settings:m,saveSettings:p}=(0,x.r)(),{spinning:Z}=(0,h.a)(),j=(0,i.Z)(e=>e.breakpoints.down("lg"));return j&&"horizontal"===m.layout&&(m.layout="vertical"),(0,s.jsxs)(r.Z,{hidden:j,settings:m,saveSettings:p,contentHeightFixed:n,verticalLayoutProps:{navMenu:{navItems:(0,a.Z)()},appBar:{content:e=>(0,s.jsx)(o.Z,{hidden:j,settings:m,saveSettings:p,toggleNavVisibility:e.toggleNavVisibility})}},..."horizontal"===m.layout&&{horizontalLayoutProps:{navMenu:{navItems:(0,l.Z)()},appBar:{content:()=>(0,s.jsx)(c.Z,{settings:m,saveSettings:p})}}},children:[t,(0,s.jsx)(d.Z,{sx:{color:"#fafafa",background:"#000000dd",zIndex:1e4},open:Z,children:(0,s.jsx)(u.Z,{color:"inherit"})})]})};t.Z=m},1341:function(e,t,n){"use strict";n.r(t);var s=n(5893),i=n(7294),r=n(657),a=n(7645),l=n(5861),o=n(3946),c=n(6580),d=n(6886),u=n(4054),x=n(1903),h=n(1425),m=n(3321),p=n(9878),Z=n(1566),j=n(6501);let g=e=>{let{open:t,report:n,handleClose:g,initialize:f}=e,[v,C]=(0,i.useState)(""),[P,y]=(0,i.useState)("");(0,i.useEffect)(()=>{t&&b()},[t]);let b=async()=>{C(n.name),y(n.url)},k=async()=>{if(""===v.trim())j.ZP.error("Please enter a report name.");else if(""===P.trim())j.ZP.error("Please enter a report url.");else{let{data:e}=await Z.Z.put("/admin/report/".concat(n._id),{name:v,url:P});e.status?(j.ZP.success(e.msg),g(),f()):j.ZP.error(e.msg)}};return(0,s.jsxs)(r.Z,{fullWidth:!0,maxWidth:"sm",open:t,children:[(0,s.jsxs)(a.Z,{sx:{mb:3},children:[(0,s.jsx)(l.Z,{component:"span",variant:"h5",children:"Edit Report"}),(0,s.jsx)(o.Z,{onClick:g,sx:{position:"absolute",right:12,top:10,color:"#aaa"},children:(0,s.jsx)(p.Z,{icon:"mdi:close"})})]}),(0,s.jsx)(c.Z,{dividers:!0,children:(0,s.jsxs)(d.ZP,{container:!0,spacing:5,children:[(0,s.jsx)(d.ZP,{item:!0,md:12,xs:12,children:(0,s.jsx)(u.Z,{fullWidth:!0,children:(0,s.jsx)(x.Z,{label:"Report Name",size:"small",value:v,onChange:e=>C(e.target.value)})})}),(0,s.jsx)(d.ZP,{item:!0,md:12,xs:12,children:(0,s.jsx)(u.Z,{fullWidth:!0,children:(0,s.jsx)(x.Z,{label:"Report URL",size:"small",value:P,onChange:e=>y(e.target.value)})})})]})}),(0,s.jsxs)(h.Z,{sx:{pt:5},children:[(0,s.jsx)(m.Z,{variant:"contained",onClick:k,children:"Update"}),(0,s.jsx)(m.Z,{variant:"contained",color:"error",onClick:g,children:"Cancel"})]})]})};t.default=g},3921:function(e,t,n){"use strict";n.r(t);var s=n(5893),i=n(7294),r=n(657),a=n(7645),l=n(5861),o=n(3946),c=n(6580),d=n(6886),u=n(4054),x=n(1903),h=n(1425),m=n(3321),p=n(9878),Z=n(6501),j=n(1566);let g=e=>{let{open:t,handleClose:n,initialize:g}=e,[f,v]=(0,i.useState)(""),[C,P]=(0,i.useState)("");(0,i.useEffect)(()=>{t&&y()},[t]);let y=async()=>{v(""),P("")},b=async()=>{if(""===f.trim())Z.ZP.error("Please enter a report name.");else if(""===C.trim())Z.ZP.error("Please enter a report url.");else{let{data:e}=await j.Z.post("admin/report",{name:f,url:C});e.status?(Z.ZP.success(e.msg),n(),g()):Z.ZP.error(e.msg)}};return(0,s.jsxs)(r.Z,{fullWidth:!0,maxWidth:"sm",open:t,children:[(0,s.jsxs)(a.Z,{sx:{mb:3},children:[(0,s.jsx)(l.Z,{component:"span",variant:"h5",children:"New Report"}),(0,s.jsx)(o.Z,{onClick:n,sx:{position:"absolute",right:12,top:10,color:"#aaa"},children:(0,s.jsx)(p.Z,{icon:"mdi:close"})})]}),(0,s.jsx)(c.Z,{dividers:!0,children:(0,s.jsxs)(d.ZP,{container:!0,spacing:5,children:[(0,s.jsx)(d.ZP,{item:!0,md:12,xs:12,children:(0,s.jsx)(u.Z,{fullWidth:!0,children:(0,s.jsx)(x.Z,{label:"Report Name",size:"small",value:f,onChange:e=>v(e.target.value)})})}),(0,s.jsx)(d.ZP,{item:!0,xs:12,children:(0,s.jsx)(u.Z,{fullWidth:!0,children:(0,s.jsx)(x.Z,{label:"Report URL",size:"small",value:C,onChange:e=>P(e.target.value)})})})]})}),(0,s.jsxs)(h.Z,{sx:{pt:5},children:[(0,s.jsx)(m.Z,{variant:"contained",onClick:b,children:"Create"}),(0,s.jsx)(m.Z,{variant:"contained",color:"error",onClick:n,children:"Cancel"})]})]})};t.default=g},3271:function(e,t,n){"use strict";n.r(t);var s=n(5893),i=n(7294),r=n(3626),a=n(7357),l=n(3321),o=n(6242),c=n(8445),d=n(5861),u=n(1903),x=n(7109),h=n(7720),m=n(4267),p=n(9878),Z=n(3559),j=n(8756),g=n(6737),f=n.n(g),v=n(6501),C=n(1566),P=n(3921),y=n(1341);let b=()=>{let{settings:e}=(0,j.r)(),[t,n]=(0,i.useState)([]),[r,g]=(0,i.useState)({}),[b,k]=(0,i.useState)(""),[w,N]=(0,i.useState)(!1),[_,z]=(0,i.useState)(!1),[R,S]=(0,i.useState)(!1);(0,i.useEffect)(()=>{W()},[b,w]);let W=async()=>{let{data:e}=await C.Z.get("/admin/reports",{params:{search:b}});n(e)},E=()=>{z(!0)},I=(e,t)=>{e.stopPropagation(),g(t),S(!0)},H=(e,t)=>{e.stopPropagation(),f()({title:"Are you sure?",text:"Once you delete it, you will not be revert it again.",icon:"warning",buttons:{confirm:{text:"Yes",className:"btn-primary"},cancel:{text:"Cancel",visible:!0,className:"btn-error"}},dangerMode:!0}).then(async e=>{if(e){let{data:e}=await C.Z.delete("/admin/report/".concat(t));e.status?(v.ZP.success(e.msg),N(e=>!e)):v.ZP.error(e.msg)}})};return(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(c.Z,{title:(0,s.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)(d.Z,{variant:"h4",children:"Report Management"}),(0,s.jsxs)(a.Z,{children:[(0,s.jsx)(u.Z,{value:b,size:"small",onChange:e=>k(e.target.value),sx:{mr:2,"& .MuiInputBase-input":{height:"1.22em"}},InputProps:{startAdornment:(0,s.jsx)(x.Z,{position:"start",children:(0,s.jsx)(p.Z,{icon:"mdi:search"})})}}),(0,s.jsxs)(l.Z,{variant:"contained",size:"small",onClick:E,children:[(0,s.jsx)(p.Z,{icon:"mdi:plus"})," Create"]})]})]}),sx:{py:4}}),(0,s.jsx)(h.Z,{}),(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(Z._,{getRowId:e=>e._id,rowHeight:60,autoHeight:!0,columns:[{minWidth:200,field:"name",headerName:"Report Name",renderCell:e=>{let{row:t}=e;return t.name}},{flex:1,minWidth:150,field:"url",headerName:"Report URL",renderCell:e=>{let{row:t}=e;return t.url}},{minWidth:100,field:"action",headerName:"Action",renderCell:e=>{let{row:t}=e;return(0,s.jsxs)(a.Z,{children:[(0,s.jsx)(l.Z,{variant:"outlined",size:"small",sx:{minWidth:30,px:1,py:1,mr:2},onClick:e=>I(e,t),children:(0,s.jsx)(p.Z,{icon:"mdi:pencil"})}),(0,s.jsx)(l.Z,{variant:"outlined",size:"small",color:"error",sx:{minWidth:30,px:1,py:1},onClick:e=>H(e,t._id),children:(0,s.jsx)(p.Z,{icon:"mdi:delete"})})]})}}],rows:t,sx:{"& .MuiDataGrid-columnHeaders":{minHeight:"40px !important",maxHeight:"40px !important",background:"dark"===e.mode&&"#25293c",border:"dark"===e.mode&&"1px solid #25293c"}}}),(0,s.jsx)(P.default,{open:_,handleClose:()=>z(!1),initialize:()=>N(e=>!e)}),(0,s.jsx)(y.default,{open:R,report:r,handleClose:()=>S(!1),initialize:()=>N(e=>!e)})]})]})};b.getLayout=e=>(0,s.jsx)(r.Z,{children:e}),t.default=b}},function(e){e.O(0,[72,886,792,53,774,888,179],function(){return e(e.s=6965)}),_N_E=e.O()}]);